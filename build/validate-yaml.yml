name: $(Build.SourceBranchName)

variables:
  - name: YAML_LINT_VERSION
    value: '1.19.0'
  - name: PYTHON_WHEEL_VERSION
    value: '0.33.6'

# Trigger paths specific for this package, change accordingly
trigger:
  branches:
    include:
      - '*'
  paths:
    include:
      - '*.yml'
      - 'build/yamllint.conf'

# Only build PRs into Master
pr:
  branches:
    include:
      - '*'
  paths:
    include:
      - '*.yml'
      - 'build/yamllint.conf'

jobs:
  - job: ValidateYamlFiles
    displayName: 'Validate YAML Files'
    condition: succeeded()
    pool:
      vmImage: 'ubuntu-18.04'
    steps:
      - bash: |
          pip install -I 'wheel==${{ variables.PYTHON_WHEEL_VERSION }}'
          pip install -I 'yamllint==${{ variables.YAML_LINT_VERSION }}'
          python -m yamllint -c build/yamllint.conf .
        displayName: 'Validates YAML files in the repo'
